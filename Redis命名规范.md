### 二、通用命名格式
采用**分层前缀 + 唯一标识**的结构，用**冒号（:）** 分隔层级（冒号是 Redis 社区推荐的分隔符，语义清晰且便于 Redis 命令（如 `KEYS` `SCAN`）批量操作）。  

基础格式：  
```
业务域:模块:唯一标识[:属性/状态]
```

#### 各部分含义：
- **业务域**：区分核心业务（如用户、商品、订单、秒杀活动等），避免跨业务冲突。  
- **模块**：业务域下的细分模块（如商品模块下的“基本信息”“库存”“价格”）。  
- **唯一标识**：用于定位具体数据的 ID（如用户 ID、商品 ID、活动 ID），支持多 ID 组合（如用户 ID + 商品 ID）。  
- **属性/状态**（可选）：区分同一资源的不同属性（如商品的“库存”“销量”）或状态（如秒杀活动的“倒计时”“参与人数”）。  


### 三、秒杀系统核心业务 key 规范
#### 1. 用户模块（user）
| 业务场景         | key 命名格式                     | 示例                          | 存储内容                  | 过期策略                |
|------------------|----------------------------------|-------------------------------|---------------------------|-------------------------|
| 用户基本信息     | `user:info:{userId}`             | `user:info:1001`              | 用户昵称、手机号等 JSON  | 30 分钟（可续期）       |
| 用户登录令牌     | `user:token:{token}`             | `user:token:xxx-jwt-xxx`      | 关联的 userId             | 与令牌过期时间一致      |
| 用户地址列表     | `user:address:{userId}`          | `user:address:1001`           | 地址列表 JSON             | 1 小时（修改时更新）    |


#### 2. 商品模块（goods）
| 业务场景         | key 命名格式                     | 示例                          | 存储内容                  | 过期策略                |
|------------------|----------------------------------|-------------------------------|---------------------------|-------------------------|
| 商品基本信息     | `goods:list:{goodsId}`           | `goods:list:2001`             | 商品名称、图片、原价等    | 1 小时（更新时主动失效）|
| 商品库存（普通） | `goods:stock:{goodsId}`          | `goods:stock:2001`            | 库存数量（整数）          | 不主动过期（实时更新）  |
| 商品详情页       | `goods:detail:{goodsId}`         | `goods:detail:2001`           | 详情页富文本、规格等      | 2 小时（更新时失效）    |


#### 3. 秒杀活动模块（seckill）
秒杀场景对缓存实时性要求极高，需特别区分“活动信息”“秒杀库存”“用户参与状态”等。

| 业务场景               | key 命名格式                                 | 示例                                  | 存储内容                  | 过期策略                |
|------------------------|----------------------------------------------|---------------------------------------|---------------------------|-------------------------|
| 秒杀活动基本信息       | `seckill:activity:{activityId}`              | `seckill:activity:3001`               | 活动时间、规则、商品 ID 等 | 活动结束后 1 小时       |
| 秒杀商品信息（特有）   | `seckill:goods:{activityId}:{goodsId}`       | `seckill:goods:3001:2001`             | 秒杀价、限购数量等        | 活动结束后 1 小时       |
| 秒杀库存（核心）       | `seckill:stock:{activityId}:{goodsId}`       | `seckill:stock:3001:2001`             | 秒杀库存数量（整数）      | 不主动过期（实时扣减）  |
| 秒杀倒计时（前端用）   | `seckill:countdown:{activityId}`             | `seckill:countdown:3001`              | 剩余秒数（整数）          | 活动开始后失效          |
| 用户秒杀资格（防重复） | `seckill:user:qualified:{activityId}:{userId}` | `seckill:user:qualified:3001:1001`    | 1（已获得资格）           | 活动结束后 10 分钟      |
| 用户秒杀结果           | `seckill:user:result:{activityId}:{userId}`   | `seckill:user:result:3001:1001`       | 订单 ID 或失败原因        | 24 小时                 |


#### 4. 订单模块（order）
| 业务场景         | key 命名格式                     | 示例                          | 存储内容                  | 过期策略                |
|------------------|----------------------------------|-------------------------------|---------------------------|-------------------------|
| 订单基本信息     | `order:info:{orderId}`           | `order:info:4001`             | 订单商品、金额、状态等    | 7 天（长期订单可延长）  |
| 用户待支付订单   | `order:pending:{userId}`         | `order:pending:1001`          | 待支付订单 ID 列表        | 30 分钟（支付超时失效） |


#### 5. 通用/统计模块
| 业务场景         | key 命名格式                     | 示例                          | 存储内容                  | 过期策略                |
|------------------|----------------------------------|-------------------------------|---------------------------|-------------------------|
| 首页轮播图       | `common:banner:home`             | `common:banner:home`          | 轮播图 URL 列表           | 30 分钟                 |
| 秒杀活动列表     | `seckill:list:{date}`            | `seckill:list:20231106`       | 当日秒杀活动 ID 列表      | 次日 0 点过期           |
| 接口限流         | `limit:api:{apiName}:{userId}`   | `limit:api:seckill:1001`      | 单位时间内请求次数        | 1 分钟                  |


### 四、特殊场景处理
1. **分布式锁 key**  
   为避免命名冲突，单独用 `lock` 作为业务域，格式：  
   ```
   lock:{业务}:{资源标识}
   ```  
   示例：秒杀库存扣减锁 `lock:seckill:stock:3001:2001`。

2. **热点数据标记**  
   对高频访问的热点商品/活动，可在 key 中增加 `hot` 标识，便于单独配置缓存策略：  
   示例：`seckill:goods:hot:3001:2001`。

3. **多版本数据**  
   若需缓存同一资源的不同版本（如商品的不同语言描述），可增加版本/语言后缀：  
   示例：`goods:info:2001:en`（英文版本）、`goods:info:2001:v2`（第二版）。


### 五、最佳实践
1. **统一前缀管理**：在代码中用常量定义前缀（如 `USER_INFO_PREFIX = "user:info:"`），避免硬编码。  
   示例（Java）：  
   ```java
   public class CacheKey {
       public static final String USER_INFO = "user:info:%s"; // %s 替换为 userId
       public static final String SECKILL_STOCK = "seckill:stock:%s:%s"; // 活动ID、商品ID
   }
   // 使用时：String key = String.format(CacheKey.USER_INFO, userId);
   ```

2. **避免过度设计**：无需为每个字段单独创建 key，优先缓存完整对象（如 `user:info:{userId}` 缓存整个用户对象，而非拆分 `user:name:{userId}` `user:phone:{userId}`）。

3. **过期时间明确**：所有缓存 key 必须设置过期时间（除需永久存储的配置类数据），避免内存溢出。

4. **定期清理无效 key**：结合 Redis 的 `EXPIRE` 机制和定时任务，清理过期或无用的 key（如已结束的秒杀活动缓存）。


通过以上规范，既能保证缓存 key 的唯一性和可读性，又能适配电商秒杀系统的高并发场景，同时便于后续维护和扩展。实际使用时可根据业务复杂度微调，核心是保持团队统一。